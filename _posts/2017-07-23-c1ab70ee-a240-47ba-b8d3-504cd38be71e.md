---
inFeed: true
description: ''
dateModified: '2017-07-23T15:19:47.789Z'
datePublished: '2017-07-23T15:19:48.142Z'
title: ''
author: []
publisher: {}
via: {}
starred: false
datePublishedOriginal: '2017-07-23T15:19:48.142Z'
sourcePath: _posts/2017-07-23-c1ab70ee-a240-47ba-b8d3-504cd38be71e.md
_type: Blurb

---
compile 'javax.servlet:javax.servlet-api:3.1.0'
    compile 'com.auth0:mvc-auth-commons:1.+'
    <dependency>
      <groupId>com.auth0</groupId>
      <artifactId>mvc-auth-commons</artifactId>
      <version>1.+</version>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>javax.servlet-api</artifactId>
      <version>3.1.0</version>
    </dependency>
    <context-param>
        <param-name>com.auth0.domain</param-name>
        <param-value>kbfamily.auth0.com</param-value>
    </context-param>
    
    <context-param>
        <param-name>com.auth0.clientId</param-name>
        <param-value>YGz8NIEjdVt9gp1I45zzufAGSDl7DbP1</param-value>
    </context-param>
    
    <context-param>
        <param-name>com.auth0.clientSecret</param-name>
        <param-value>4hEgEWUj6DMs2zEi6JSiy56Mo3NQsQ0LzsgyQq3kekpkzkgNq4CLxmFrwgsHBLoy</param-value>
    </context-param>
    - src
    -- main
    ---- java
    ------ com
    -------- auth0
    ---------- example
    ------------ Auth0Filter.java
    ------------ AuthenticationControllerProvider.java
    ------------ HomeServlet.java
    ------------ CallbackServlet.java
    ------------ LoginServlet.java
    ------------ LogoutServlet.java
    ---- webapp
    ------ WEB-INF
    -------- jsp
    ---------- home.jsp
    -------- web.xml
    - build.gradle
    @Override
    protected void doGet(final HttpServletRequest req, final HttpServletResponse res) throws ServletException, IOException {
        String redirectUri = req.getScheme() + "://" + req.getServerName() + ":" + req.getServerPort() + "/callback";
    
        String authorizeUrl = authenticationController.buildAuthorizeUrl(req, redirectUri)
                .build();
        res.sendRedirect(authorizeUrl);
    }
    public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException, ServletException {
        try {
          //Parse the request
            Tokens tokens = authenticationController.handle(req);
            SessionUtils.set(req, "accessToken", tokens.getAccessToken());
            SessionUtils.set(req, "idToken", tokens.getIdToken());
            res.sendRedirect(redirectOnSuccess);
        } catch (IdentityVerificationException e) {
            e.printStackTrace();
            res.sendRedirect(redirectOnFail);
        }
    }
    protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
        final String accessToken = (String) SessionUtils.get(req, "accessToken");
        final String idToken = (String) SessionUtils.get(req, "idToken");
        if (accessToken != null) {
            req.setAttribute("userId", accessToken);
        } else if (idToken != null) {
            req.setAttribute("userId", idToken);
        }
        req.getRequestDispatcher("/WEB-INF/jsp/home.jsp").forward(req, res);
    }